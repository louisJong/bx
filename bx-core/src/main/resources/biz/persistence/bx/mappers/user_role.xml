<?xml version="1.0" encoding= "UTF-8" ?>        
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user_role">
<resultMap id="user_role" type="com.baojing.credit.model.UserRole">
	<result column="id" property="id"/>
	<result column="role_name" property="roleName"/>
	<result column="remark" property="remark"/>
	<result column="permission" property="permission"/>
	<result column="create_time" property="createTime"/>
	<result column="update_time" property="updateTime"/>
	<result column="create_user" property="createUser"/>
</resultMap>
<select id="findById" parameterType="long"  resultMap="user_role">
	select * 	from user_role where id=#{id}  
</select>  
<select id="queryRecord" parameterType="map"  resultType="map">
	select id, role_name roleName , remark description , permission , update_time updateTime 	from user_role 
	<where>
		<if test="rolename!=null and rolename!=''">
			role_name  like CONCAT('%','${rolename}','%' )
		</if>
		order by id desc 
		limit #{startRow} , #{limit}
	</where>
</select>  
<select id="queryCount" parameterType="map"  resultType="long">
	select count(1)	from user_role 
	<where>
		<if test="rolename!=null and rolename!=''">
			role_name  like CONCAT('%','${rolename}','%' )
		</if>
	</where>
</select>  
<insert id="insert"  parameterType="com.baojing.credit.model.UserRole"  useGeneratedKeys="true" keyProperty="id">
	insert into user_role(id ,role_name ,remark ,permission ,create_time ,update_time ,create_user)
   values(#{id,jdbcType=INTEGER} ,#{roleName,jdbcType=VARCHAR} ,#{remark,jdbcType=VARCHAR} ,#{permission,jdbcType=VARCHAR} ,#{createTime,jdbcType=TIMESTAMP} ,#{updateTime,jdbcType=TIMESTAMP} ,#{createUser,jdbcType=VARCHAR}) 
</insert>
<insert id="batchInsert"  parameterType="list">
	insert into user_role(id ,role_name ,remark ,permission ,create_time ,update_time ,create_user)
   values
	<foreach collection="list" item="item" index="index"   separator=","> 
    (#{item.id,jdbcType=INTEGER} ,#{item.roleName,jdbcType=VARCHAR} ,#{item.remark,jdbcType=VARCHAR} ,#{item.permission,jdbcType=VARCHAR} ,#{item.createTime,jdbcType=TIMESTAMP} ,#{item.updateTime,jdbcType=TIMESTAMP} ,#{item.createUser,jdbcType=VARCHAR})
	</foreach> 
</insert>
<update id="update"	parameterType="com.baojing.credit.model.UserRole">
	update user_role
<set>
	<if test="roleName != null">role_name=#{roleName},</if>
	<if test="remark != null">remark=#{remark},</if>
	<if test="permission != null">permission=#{permission},</if>
	<if test="updateTime != null">update_time=#{updateTime}</if>
</set>
	where id=#{id}
</update>
</mapper>
